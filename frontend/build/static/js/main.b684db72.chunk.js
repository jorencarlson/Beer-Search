(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{38:function(e,t,a){e.exports=a.p+"static/media/Brewdog-logo.fb243bee.png"},47:function(e,t,a){e.exports=a(85)},52:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){},85:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(10),s=a.n(i);a(52),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(53);var o=a(13),c=a.n(o),l=a(19),u=a(5),m=a(6),d=a(8),p=a(7),f=a(9),g=a(90),h=(a(55),a(56),function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).trimDescription=function(){var e=a.props.attributes.description.split(" ");if(e.length<=40)return a.props.attributes.description;for(var t="",n=0;n<40;n++){var r=e[n];39===n?("."===r.charAt(r.length-1)&&(r=r.slice(0,r.length-1)),t+="".concat(r,"...")):t+="".concat(r," ")}return t},a.addToFavorites=function(){a.props.addToFavorites(a.props.attributes)},a.removeFromFavorites=function(){a.props.removeFromFavorites(a.props.attributes)},a.addButton=function(){return a.props.addToFavorites?r.a.createElement("div",{className:"favorite-container"},r.a.createElement("button",{className:"btn btn-outline-primary",onClick:a.addToFavorites},"Add to Favorites")):a.props.removeFromFavorites?r.a.createElement("div",{className:"favorite-container"},r.a.createElement("button",{className:"btn btn-outline-primary",onClick:a.removeFromFavorites},"Remove from Favorites")):void 0},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"beer-card border border-light rounded shadow m-2"},r.a.createElement("div",{className:"img-and-description-container"},r.a.createElement("div",{className:"beer-img-container"},r.a.createElement("img",{className:"beer-img",src:this.props.attributes.img,alt:"Beer"})),r.a.createElement("div",{className:"description-container"},r.a.createElement("h5",{className:"beer-name"},this.props.attributes.name),r.a.createElement("div",{className:"beer-description"},this.trimDescription()))),this.addButton())}}]),t}(r.a.Component)),v=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).displayButton=function(){if(!0===a.props.displayButton)return r.a.createElement("button",{className:"btn btn-primary w-50",onClick:a.props.displayBeers},"Load More")},a.displayBeers=function(){if(null!==a.props.beerList)return a.props.beerList.map(function(e){return r.a.createElement(h,{key:e.id,beerKey:e.id,attributes:e,addToFavorites:a.props.addToFavorites})})},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{id:"beers"},this.displayBeers()),r.a.createElement("div",{className:"w-100 m-2 d-flex justify-content-center align-items-center",id:"load-more-container"},"                    ",this.displayButton()))}}]),t}(r.a.Component),b=(a(57),function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"d-flex justify-content-center align-items-center flex-wrap"},this.props.favoriteList.map(function(t){return r.a.createElement(h,{key:t.id,beerKey:t.id,attributes:t,removeFromFavorites:e.props.removeFromFavorites})}))}}]),t}(r.a.Component)),y=(a(58),a(89)),j=a(38),E=a.n(j),w=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).getAndDisplayBeers=function(){var e=document.forms["search-form"].search.value;document.forms["search-form"].search.value=null,a.props.getAndDisplayBeers(e)},a.submit=function(e){e.preventDefault(),a.getAndDisplayBeers()},a.redirect=function(e){"logo"===e.target.id?a.props.resetAndRedirect(""):"favorites-btn"===e.target.id?a.props.history.push("favorites"):"Sign in"===e.target.innerHTML?a.props.history.push("login"):"Sign up"===e.target.innerHTML&&a.props.history.push("signup")},a.constructDropdown=function(){return a.props.loggedIn?r.a.createElement(y.a,{className:"mr-2"},r.a.createElement(y.a.Toggle,{variant:"outline-primary",id:"dropdown-basic"},"Hello ","".concat(a.props.firstname)),r.a.createElement(y.a.Menu,null,r.a.createElement(y.a.Item,{onClick:a.props.signOut},"Sign out"))):r.a.createElement(y.a,{className:"mr-2"},r.a.createElement(y.a.Toggle,{variant:"outline-primary",id:"dropdown-basic"},"Sign in"),r.a.createElement(y.a.Menu,null,r.a.createElement(y.a.Item,{onClick:a.redirect},"Sign in"),r.a.createElement(y.a.Item,{onClick:a.redirect},"Sign up")))},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("nav",{id:"navbar",className:"navbar navbar-light bg-light rounded shadow-sm fixed-top"},r.a.createElement("div",{id:"logo-container",onClick:this.redirect},r.a.createElement("img",{id:"logo",src:E.a})),r.a.createElement("form",{className:"d-flex flex-grow-1 ml-2 mr-2",name:"search-form",id:"search-form",onSubmit:this.submit},r.a.createElement("input",{id:"search",type:"text",className:"form-control rounded-left border-right-0 flex-grow-1",placeholder:"Search for beer...",name:"search"}),r.a.createElement("button",{className:"btn btn-primary rounded-right",type:"submit",id:"search-btn"},"Search")),this.constructDropdown(),r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.redirect,id:"favorites-btn"},r.a.createElement("span",{className:"text-nowrap"},"Favorites ",r.a.createElement("span",{id:"badge",className:"badge badge-light"},this.props.favoriteNum))))}}]),t}(r.a.Component),O=(a(80),function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).redirect=function(e){},a.formHandler=function(e){e.preventDefault();var t=document.forms["signup-form"];t.password1.value!==t.password2.value&&a.displayWarningText("Passwords do not match.");var n={firstname:t.firstname.value,lastname:t.lastname.value,email:t.email.value,password:t.password1.value};a.signUp("http://localhost:5000/signup",n)},a.displayWarningText=function(e){s.a.render(r.a.createElement("div",{className:"d-flex justify-content-center align-items-center alert alert-warning w-100 h-100",role:"alert"},e),document.getElementById("sign-up-warning"))},a.signUp=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};fetch(e,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){1===e.statusCode?a.props.history.push("/login"):a.displayWarningText(e.message)}).catch(function(e){console.error(e.stack)})},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{id:"sign-up-container",className:"w-100 d-flex flex-column align-items-center"},r.a.createElement("div",{id:"sign-up-warning"}),r.a.createElement("form",{className:"d-flex justify-content-center align-items-center flex-column border border-light rounded shadow",id:"sign-up-form",onSubmit:this.formHandler,name:"signup-form"},r.a.createElement("div",{className:"form-group mb-2 d-flex justify-content-center align-items-center sign-up"},r.a.createElement("input",{type:"text",className:"form-control mr-3",placeholder:"First name",name:"firstname",required:!0}),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Last name",name:"lastname",required:!0})),r.a.createElement("div",{className:"form-group mb-2 sign-up"},r.a.createElement("input",{type:"email",className:"form-control",placeholder:"Email",name:"email",required:!0})),r.a.createElement("div",{className:"form-group sign-up"},r.a.createElement("input",{type:"password",className:"form-control mb-2",placeholder:"Password",name:"password1",required:!0}),r.a.createElement("input",{type:"password",className:"form-control",placeholder:"Confirm password",name:"password2",required:!0})),r.a.createElement("button",{type:"submit",id:"sign-up-btn",className:"btn btn-outline-primary align-self-center"},"Sign up")))}}]),t}(r.a.Component)),x=(a(81),function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).formHandler=function(e){e.preventDefault();var t=document.forms["login-form"],n={email:t.email.value,password:t.password.value};a.login("http://localhost:5000/login",n)},a.displayWarningText=function(e){s.a.render(r.a.createElement("div",{className:"d-flex justify-content-center align-items-center alert alert-warning w-100 h-100",role:"alert"},e),document.getElementById("login-warning"))},a.login=Object(l.a)(c.a.mark(function e(){var t,n,r,i,s=arguments;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:"",n=s.length>1&&void 0!==s[1]?s[1]:{},e.prev=2,e.next=5,fetch(t,{method:"POST",credentials:"include",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}});case 5:if(401!==(r=e.sent).status){e.next=10;break}a.displayWarningText("The email or password is incorrect."),e.next=14;break;case 10:return e.next=12,r.json();case 12:1===(i=e.sent).statusCode&&(a.props.updateFavoritesFromLogin(i.beerIDs),a.props.resetAndRedirect("",i.firstname));case 14:e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(2),console.error(e.t0.stack),e.abrupt("return");case 20:case 21:case"end":return e.stop()}},e,null,[[2,16]])})),a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{id:"login-container",className:"w-100 d-flex flex-column align-items-center"},r.a.createElement("div",{id:"login-warning"}),r.a.createElement("form",{id:"login-form",className:"d-flex flex-column justify-content-center align-items-center border border-light rounded shadow",onSubmit:this.formHandler,name:"login-form"},r.a.createElement("input",{type:"email",className:"form-control mb-2 login",placeholder:"Email",name:"email",id:"email",required:!0}),r.a.createElement("input",{type:"password",className:"form-control mb-3 login",placeholder:"Password",name:"password",id:"password",required:!0}),r.a.createElement("button",{type:"submit",className:"btn btn-outline-primary align-self-center login mb-3",id:"sign-in"},"Sign in"),r.a.createElement("div",{id:"sign-up-alert",className:"alert alert-primary login d-flex justify-content-center align-items-center",role:"alert"},r.a.createElement("div",null,"New user? Sign up ",r.a.createElement("a",{href:"/signup",className:"alert-link"},"here"),"."))))}}]),t}(r.a.Component)),S=(a(82),function(e){function t(e){var a;Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).getAndDisplayBeers=function(e){""!==e&&(e===a.state.searchTerm&&(a.state.jsonIndex<a.state.json.length||a.state.json.length<80)||fetch("https://api.punkapi.com/v2/beers?page=".concat(a.state.page,"&per_page=80&beer_name=").concat(e)).then(function(e){return e.json()}).then(function(t){0!==t.length&&(e===a.state.searchTerm?a.setState({json:t,jsonIndex:0},function(){a.displayBeers()}):a.setState({json:t,jsonIndex:0,searchTerm:e,page:1,beerList:null,haventSearched:!1},function(){a.displayBeers()}))}).catch(function(e){console.error(e)}))},a.displayBeers=function(){var e=a.state.json.length-a.state.jsonIndex;e>=6?a.makeBeerListThenDisplay(6):0!==e?a.makeBeerListThenDisplay(e):80===a.state.json.length?a.setState({page:a.props.app.state.page+1},function(){a.getAndDisplayBeers(a.state.searchTerm)}):a.setState({page:a.props.app.state.page+1},function(){})},a.makeBeerListThenDisplay=function(e){var t=[];if(null!=a.state.beerList)for(var n=0;n<a.state.beerList.length;n++)t.push(a.state.beerList[n]);for(var r=a.state.jsonIndex,i=0;i<e;i++)t.push({id:a.state.json[r].id,img:a.state.json[r].image_url,name:a.state.json[r].name,description:a.state.json[r].description}),r++;a.setState({beerList:t,jsonIndex:r},function(){var e;e=a.state.jsonIndex!==a.state.json.length,a.setState({displayButton:e},function(){a.props.history.push("/")})})},a.addToFavorites=function(e){var t=a.state.favoriteList;if(!t.find(function(t){return t.id===e.id})){var n=t;n.push(e),localStorage.setItem("favoriteList",JSON.stringify(n)),a.setState({favoriteList:n})}},a.updateFavoritesFromLogin=function(){var e=Object(l.a)(c.a.mark(function e(t){var n,r,i,s,o,l;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({favoriteListDB:t.map(function(e){return parseInt(e)})}),localStorage.setItem("favoriteListDB",JSON.stringify(t)),n=a.createURLForStoredBeerIDs(t),e.next=5,fetch(n);case 5:return r=e.sent,e.next=8,r.json();case 8:for(i=e.sent,s=a.state.favoriteList,o=function(e){s.find(function(t){return t.id===i[e].id})||s.push({id:i[e].id,img:i[e].image_url,name:i[e].name,description:i[e].description})},l=0;l<i.length;l++)o(l);localStorage.setItem("favoriteList",JSON.stringify(s)),a.setState({favoriteList:s});case 14:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.createURLForStoredBeerIDs=function(e){for(var t="https://api.punkapi.com/v2/beers?ids=",a=0;a<e.length;a++)a<e.length-1?t+="".concat(e[a],"|"):t+="".concat(e[a]);return t},a.resetAndRedirect=function(e,t){void 0!==t&&a.setState({firstname:t,loggedIn:!0}),a.setState({json:null,jsonIndex:0,searchTerm:null,page:1,beerList:[],displayButton:!1,haventSearched:!0},function(){""===e&&a.getAndDisplayBeers("beer"),a.props.history.push("/".concat(e))})},a.redirect=function(e){a.props.history.push("/".concat(e))},a.removeFromFavorites=function(e){var t=a.state.favoriteList,n=t.findIndex(function(t){return t.id===e.id}),r=t;r.splice(n,1),localStorage.setItem("favoriteList",JSON.stringify(r)),a.setState({favoriteList:r})},a.signOut=Object(l.a)(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:5000/favorites",{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({favoriteList:a.state.favoriteList.map(function(e){return e.id}),favoriteListDB:a.state.favoriteListDB})});case 2:if(200!==e.sent.status){e.next=12;break}return e.next=6,fetch("http://localhost:5000/favorites",{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({favoriteList:a.state.favoriteList.map(function(e){return e.id}),favoriteListDB:a.state.favoriteListDB})});case 6:if(200!==e.sent.status){e.next=12;break}return e.next=10,fetch("http://localhost:5000/signout",{method:"POST",credentials:"include"});case 10:200===e.sent.status&&(localStorage.setItem("favoriteList",JSON.stringify([])),localStorage.setItem("favoriteListDB",JSON.stringify([])),a.setState({favoriteList:[],favoriteListFromDB:[],loggedIn:!1,firstname:""},function(){return a.resetAndRedirect("")}));case 12:case"end":return e.stop()}},e)}));var n=JSON.parse(localStorage.getItem("favoriteList")),r=JSON.parse(localStorage.getItem("favoriteListDB"));return null===n&&(n=[],localStorage.setItem("favoriteList",JSON.stringify(n))),null===r&&(r=[],localStorage.setItem("favoriteListDB",JSON.stringify(r))),a.state={favoriteList:n,favoriteListDB:r,json:null,jsonIndex:0,searchTerm:null,page:1,beerList:[],displayButton:!1,haventSearched:!0,loggedIn:!1,firstname:""},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(l.a)(c.a.mark(function e(){var t,a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"/"===this.props.history.location.pathname&&this.state.haventSearched&&this.getAndDisplayBeers("beer"),e.prev=1,e.next=4,fetch("http://localhost:5000/loggedin",{credentials:"include"});case 4:return t=e.sent,e.next=7,t.json();case 7:(a=e.sent).loggedIn&&this.setState({firstname:a.firstname,loggedIn:!0}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0.stack);case 14:case"end":return e.stop()}},e,this,[[1,11]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(g.b,{history:this.props.history},r.a.createElement(g.a,{path:"/",render:function(t){return r.a.createElement(w,Object.assign({},t,{getAndDisplayBeers:e.getAndDisplayBeers,favoriteNum:e.state.favoriteList.length,resetAndRedirect:e.resetAndRedirect,redirect:e.redirect,loggedIn:e.state.loggedIn,firstname:e.state.firstname,signOut:e.signOut}))}}),r.a.createElement(g.c,null,r.a.createElement(g.a,{exact:!0,path:"/login",render:function(t){return r.a.createElement(x,Object.assign({},t,{updateFavoritesFromLogin:e.updateFavoritesFromLogin,resetAndRedirect:e.resetAndRedirect}))}}),r.a.createElement(g.a,{exact:!0,path:"/signup",render:function(e){return r.a.createElement(O,e)}}),r.a.createElement(g.a,{exact:!0,path:"/",render:function(t){return r.a.createElement(v,{favoriteList:e.state.favoriteList,addToFavorites:e.addToFavorites,beerList:e.state.beerList,displayButton:e.state.displayButton,displayBeers:e.displayBeers})}}),r.a.createElement(g.a,{path:"/favorites",render:function(t){return r.a.createElement(b,{favoriteList:e.state.favoriteList,removeFromFavorites:e.removeFromFavorites})}})))}}]),t}(r.a.Component)),L=a(15),N=Object(L.a)();s.a.render(r.a.createElement(S,{history:N}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[47,1,2]]]);
//# sourceMappingURL=main.b684db72.chunk.js.map